{% load static %}
<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>trustbyte99 shop update </title>
  <link rel="stylesheet" href="{% static 'trustbyte/css/shop-update_style.css' %}">

</head>
<body>
<!-- partial:index.partial.html -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title> trustbyte99</title>
    <link rel="stylesheet" href="{% static 'trustbyte/css/shop-update_style.css' %}">
    <script type="importmap">
    {
        "imports": {
            "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
        }
    }
    </script>
    <style>
        /* MTN Data Purchase Styles */
        .mtn-data-purchase {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .mtn-data-purchase .main-content {
            padding: 30px 20px;
        }

        .mtn-data-purchase .title {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 25px;
            text-align: center;
        }

        .mtn-data-purchase .subtitle {
            font-size: 13px;
            color: #8a8a8a;
            margin: -10px 0 18px;
            text-align: center;
        }

        .mtn-data-purchase .section-title {
            font-size: 16px;
            color: #666;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .mtn-data-purchase .data-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-bottom: 25px;
        }

        .mtn-data-purchase .data-btn {
            background: #f8f8f8;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 8px 4px;
            font-size: 12px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mtn-data-purchase .data-btn:hover {
            background: #ffcc00;
            border-color: #ffcc00;
            transform: translateY(-2px);
        }

        .mtn-data-purchase .data-btn.selected {
            background: #ffcc00;
            border-color: #ffcc00;
            box-shadow: 0 4px 12px rgba(255, 204, 0, 0.4);
        }

        .mtn-data-purchase .price-section {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 20px;
        }

        .mtn-data-purchase .price-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .mtn-data-purchase .price-label {
            font-size: 14px;
            color: #666;
        }

        .mtn-data-purchase .price-value {
            font-size: 18px;
            font-weight: 700;
            color: #ffcc00;
        }

        .mtn-data-purchase .form-section {
            margin-bottom: 30px;
        }

        .mtn-data-purchase .form-label {
            display: block;
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .mtn-data-purchase .phone-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .mtn-data-purchase .phone-input:focus {
            outline: none;
            border-color: #ffcc00;
        }

        .mtn-data-purchase .buy-button {
            width: 100%;
            padding: 18px;
            background: #ffcc00;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mtn-data-purchase .buy-button:hover:not(:disabled) {
            background: #ffd633;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 204, 0, 0.3);
        }

        .mtn-data-purchase .buy-button:disabled {
            background: #e0e0e0;
            color: #999;
            cursor: not-allowed;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 350px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            padding: 20px 20px 0;
            text-align: center;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin: 0;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-message {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
            text-align: center;
            margin: 0;
        }

        .modal-footer {
            display: flex;
            gap: 10px;
            padding: 0 20px 20px;
        }

        .modal-button {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-cancel {
            background: #f0f0f0;
            color: #666;
        }

        .modal-cancel:hover {
            background: #e0e0e0;
        }

        .modal-confirm {
            background: #ffcc00;
            color: #333;
        }

        .modal-confirm:hover {
            background: #ffd633;
            transform: translateY(-1px);
        }

        @media (max-width: 480px) {
            .mtn-data-purchase {
                border-radius: 0;
                max-width: 100%;
                height: 100vh;
                margin: 0;
            }
            
            .mtn-data-purchase .main-content {
                flex: 1;
                overflow-y: auto;
            }
            
            .mtn-data-purchase .data-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 6px;
            }
            
            .mtn-data-purchase .data-btn {
                padding: 6px 3px;
                font-size: 11px;
                min-height: 35px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div v-if="showCryptoView" class="crypto-view">
            <div class="crypto-header">
                <button class="back-button" @click="closeCryptoView">‚Üê</button>
                <div class="crypto-title">Buy Cryptocurrency</div>
                <div style="width: 24px;"></div>
            </div>
            
            <div class="crypto-dropdown">
                <div class="crypto-selected" @click="toggleCryptoDropdown">
                    <div class="crypto-icon" :style="{ background: cryptos.find(c => c.symbol === selectedCrypto).color }">
                        <img v-if="cryptos.find(c => c.symbol === selectedCrypto).image" :src="cryptos.find(c => c.symbol === selectedCrypto).image" :alt="selectedCrypto">
                        <template v-else>{{ selectedCrypto }}</template>
                    </div>
                    <div class="crypto-option-label">
                        <span class="crypto-option-name">{{ cryptos.find(c => c.symbol === selectedCrypto).name }}</span>
                        <span class="crypto-option-symbol">{{ selectedCrypto }}</span>
                    </div>
                    <div class="crypto-dropdown-arrow">
                        <svg width="12" height="12" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M7,10L12,15L17,10H7Z"/>
                        </svg>
                    </div>
                </div>
                <div class="crypto-dropdown-menu" :class="{ open: showCryptoDropdown }">
                    <div 
                        v-for="crypto in cryptos" 
                        :key="crypto.symbol"
                        class="crypto-dropdown-item"
                        @click="selectCryptoFromDropdown(crypto.symbol)"
                    >
                        <div class="crypto-icon" :style="{ background: crypto.color }">
                            <img v-if="crypto.image" :src="crypto.image" :alt="crypto.symbol">
                            <template v-else>{{ crypto.symbol }}</template>
                        </div>
                        <div class="crypto-option-label">
                            <span class="crypto-option-name">{{ crypto.name }}</span>
                            <span class="crypto-option-symbol">{{ crypto.symbol }}</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="crypto-card">
                <div class="conversion-display">
                    <div class="currency-row">
                        <div class="currency-label">USD</div>
                        <div class="currency-amount">
                            $<input 
                                type="number" 
                                v-model="cryptoAmount" 
                                class="amount-input" 
                                min="1" 
                                step="0.01"
                            >
                        </div>
                    </div>
                    
                    <div class="divider"></div>
                    
                    <div class="currency-row">
                        <div class="currency-label">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div class="crypto-icon" :style="{ background: cryptos.find(c => c.symbol === selectedCrypto).color, width: '24px', height: '24px' }">
                                    <img v-if="cryptos.find(c => c.symbol === selectedCrypto).image" :src="cryptos.find(c => c.symbol === selectedCrypto).image" :alt="selectedCrypto">
                                    <template v-else>{{ selectedCrypto }}</template>
                                </div>
                                <span>{{ selectedCrypto }}</span>
                            </div>
                        </div>
                        <div class="currency-amount">
                            {{ getCryptoAmount() }}
                            <span v-if="fetchingRates" class="loading-indicator">updating...</span>
                            <svg @click="updateCryptoRates" width="16" height="16" viewBox="0 0 24 24" style="cursor:pointer; margin-left:5px; vertical-align:middle;">
                                <path fill="currentColor" d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <label class="input-label">Wallet Address</label>
                <input 
                    type="text" 
                    v-model="walletAddress" 
                    class="wallet-input" 
                    placeholder="Enter your wallet address"
                >
                
                <button @click="purchaseSolana" class="purchase-button">
                    Buy {{ cryptos.find(c => c.symbol === selectedCrypto).name }}
                </button>
                
                <div style="text-align: center; font-size: 12px; color: #666; margin-top: 10px;" v-if="priceLastUpdated">
                    Prices last updated: {{ priceLastUpdated }}
                </div>
            </div>
            <div class="how-to-buy">
                <h3>How to Buy Cryptocurrency</h3>
                <p>Unlock the world of cryptocurrency on the 'Trustbyte99' platform. Simply create your free account, fund it using our convenient methods, and start buying crypto directly to your address. Aishwave makes getting started quick, easy, and secure.</p>
            </div>
            
            <div class="faq-section">
                <h3>Frequently Asked Questions</h3>
                <div class="faq-item">
                    <div class="faq-question" @click="toggleFaq(0)">Can I buy crypto directly to my wallet?</div>
                    <div class="faq-answer" :class="{ active: activeFaq === 0 }">Yes, it's simple and fast! Once you fund your account, you can easily buy crypto and have it sent directly to your wallet.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" @click="toggleFaq(1)">What is the minimum amount of cryptocurrency I can buy?</div>
                    <div class="faq-answer" :class="{ active: activeFaq === 1 }">You can buy as little as $10 worth of crypto on Aishwave. Additionally, Trustbyte99 allows you to set up recurring buys, so you can regularly accumulate cryptocurrency.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" @click="toggleFaq(2)">How can I keep my crypto safe?</div>
                    <div class="faq-answer" :class="{ active: activeFaq === 2 }">While the safest option is to store your crypto in your own cold wallet, we strive to maintain transparency and provide top-level security for your assets.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" @click="toggleFaq(3)">Is cryptocurrency safe to buy?</div>
                    <div class="faq-answer" :class="{ active: activeFaq === 3 }">Cryptocurrency prices can fluctuate significantly based on market conditions. We recommend doing your own research on digital assets before making a purchase.</div>
                </div>
            </div>
        </div>
        
        <div v-if="showTradeView" class="trade-view">
            <div class="crypto-header">
                <button class="back-button" @click="closeTradeView">‚Üê</button>
                <div class="crypto-title">Trade Gift Cards</div>
                <div style="width: 24px;"></div>
            </div>
            
            <div class="trade-card">
                <h3 class="trade-title">Sell Your Gift Card</h3>
                
                <div class="gift-cards-grid">
                    <div 
                        v-for="card in ['Apple', 'Google Play', 'Amazon', 'eBay', 'PlayStation', 'Steam', 'iTunes', 'Razer']"
                        :key="card"
                        class="gift-card-option"
                        :class="{ selected: selectedGiftCard === card }"
                        @click.prevent="selectGiftCard(card)"
                    >
                        <div class="gift-card-icon">
                            <img :src="giftCardImages[card]" :alt="card">
                        </div>
                        <span>{{ card }}</span>
                    </div>
                </div>
                
                <div class="trade-filters">
                    <div class="trade-filter">
                        <label class="input-label">Currency</label>
                        <select class="trade-select">
                            <option>USD</option>
                            <option>EUR</option>
                            <option>GBP</option>
                        </select>
                    </div>
                    <div class="trade-filter">
                        <label class="input-label">Amount</label>
                        <input 
                            type="text" 
                            v-model="tradeAmount" 
                            class="trade-select" 
                            placeholder="Enter amount"
                        >
                    </div>
                    <div class="trade-filter">
                        <label class="input-label">Card Type</label>
                        <select class="trade-select">
                            <option>Physical</option>
                            <option>E-code</option>
                        </select>
                    </div>
                </div>
                
                <label class="input-label">Card Code</label>
                <input 
                    type="text" 
                    v-model="tradeCardCode" 
                    class="wallet-input" 
                    placeholder="Enter your gift card code"
                >
                
                <div class="file-upload">
                    <label class="file-upload-label">
                        <svg width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M14,13V17H10V13H7L12,8L17,13M22,12C22,6.48 17.52,2 12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12M11,7V13L16.25,16.15L17,14.92L12.5,12.25V7H11Z"/>
                        </svg>
                        <span>Click to upload card image</span>
                        <input 
                            type="file" 
                            accept="image/*" 
                            class="file-upload-input"
                            @change="handleFileUpload"
                        >
                    </label>
                    <div class="file-name" :class="{ visible: uploadedFileName }">
                        {{ uploadedFileName }}
                    </div>
                </div>
                
                <button @click="submitTrade" class="purchase-button">
                    Sell Gift Card
                </button>
            </div>
            
            <div class="trade-description">
                <h3>How to Sell Gift Cards</h3>
                <p>Select your gift card type, enter the card details including the code, and submit. We'll verify your card and process the payment to your account. Fast, secure, and hassle-free.</p>
            </div>
        </div>
        
        <!-- Data View - MTN Data Purchase -->
        <div v-if="showDataView" class="data-view">
            <div class="data-header">
                <button class="back-button" @click="closeDataView">‚Üê</button>
                <div class="crypto-title">MTN Data Bundle</div>
                <div style="width: 24px;"></div>
            </div>
            
            <div class="mtn-data-purchase">
                <main class="main-content">
                    <h1 class="title">Buy Data Bundle</h1>
                    <p class="subtitle">Non-expiring data</p>
                    
                    <div class="data-selection">
                        <h2 class="section-title">Select Data Size</h2>
                        <div class="data-grid">
                            <button class="data-btn" data-size="1GB" data-price="4.70">1GB</button>
                            <button class="data-btn" data-size="2GB" data-price="9.20">2GB</button>
                            <button class="data-btn" data-size="3GB" data-price="15.00">3GB</button>
                            <button class="data-btn" data-size="4GB" data-price="20.00">4GB</button>
                            <button class="data-btn" data-size="5GB" data-price="25.00">5GB</button>
                            <button class="data-btn" data-size="6GB" data-price="30.00">6GB</button>
                            <button class="data-btn" data-size="7GB" data-price="34.50">7GB</button>
                            <button class="data-btn" data-size="8GB" data-price="39.50">8GB</button>
                            <button class="data-btn" data-size="10GB" data-price="46.50">10GB</button>
                            <button class="data-btn" data-size="15GB" data-price="70.00">15GB</button>
                            <button class="data-btn" data-size="20GB" data-price="95.00">20GB</button>
                            <button class="data-btn" data-size="25GB" data-price="115.00">25GB</button>
                            <button class="data-btn" data-size="30GB" data-price="135.00">30GB</button>
                            <button class="data-btn" data-size="40GB" data-price="180.00">40GB</button>
                            <button class="data-btn" data-size="50GB" data-price="220.00">50GB</button>
                            <button class="data-btn" data-size="100GB" data-price="380.00">100GB</button>
                        </div>
                    </div>
                    
                    <div class="price-section">
                        <div class="price-display">
                            <span class="price-label">Price:</span>
                            <span class="price-value">‚Çµ4.70</span>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <label for="phone-number" class="form-label">Beneficiary Phone Number</label>
                        <input type="tel" id="phone-number" class="phone-input" placeholder="Enter phone number" maxlength="10">
                    </div>
                    
                    <button class="buy-button" disabled>BUY</button>
                </main>
            </div>
            
            <!-- Confirmation Modal -->
            <div class="modal-overlay" id="confirmationModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title">Confirmation</h3>
                    </div>
                    <div class="modal-body">
                        <p class="modal-message">Your data will be delivered within 0‚Äì4 hours. If it doesn't reflect, please contact Live Chat or Support.</p>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-button modal-cancel" id="cancelButton">Cancel</button>
                        <button class="modal-button modal-confirm" id="confirmButton">Confirm</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Products -->
        <div v-if="showProductDetailView" class="product-detail-view">
            <div class="product-detail-header">
                <button class="back-button" @click="closeProductDetailView">‚Üê</button>
                <div class="product-detail-title">{{ selectedProduct.name }} {{ selectedProduct.category === 'games' ? 'Direct Top Up' : 
                    selectedProduct.category === 'esim' ? 'eSIM' : 'Gift Card' }}</div>
                <div style="width: 24px;"></div>
            </div>
            
            <div class="product-detail-image">
                <div class="discount-badge-large" v-if="selectedProduct && selectedProduct.category === 'games'" style="background: #2D7BD7;">-{{discountPercentage}}% OFF</div>
                <img v-if="selectedProduct && selectedProduct.category === 'games'" :src="gameImages[selectedProduct.name]" :alt="selectedProduct.name">
                <img v-if="selectedProduct && selectedProduct.category === 'ecommerce'" :src="ecommerceImages[selectedProduct.name]" :alt="selectedProduct.name">
                <img v-if="selectedProduct && selectedProduct.category === 'amazon'" :src="amazonImages[selectedProduct.name]" :alt="selectedProduct.name">
                <img v-if="selectedProduct && selectedProduct.category === 'esim'" :src="eSimImages[selectedProduct.name]" :alt="selectedProduct.name">
            </div>
            
            <div class="product-detail-options">
                <div class="product-detail-option">
                    <div class="product-detail-label">Recipient Details</div>
                    <div class="custom-amount">
                        <input 
                            v-if="selectedProduct && selectedProduct.category === 'games'"
                            type="text" 
                            v-model="playerId" 
                            placeholder="Enter your Play ID" 
                        >
                        <input 
                            v-if="selectedProduct && (selectedProduct.category === 'ecommerce' || selectedProduct.category === 'amazon')"
                            type="email" 
                            v-model="recipientEmail" 
                            placeholder="Enter valid email for voucher" 
                        >
                        <input 
                            v-if="selectedProduct && selectedProduct.category === 'esim'"
                            type="email" 
                            v-model="recipientEmail" 
                            placeholder="Enter valid email for eSIM details" 
                        >
                    </div>
                    
                    <div class="product-detail-label" style="margin-top: 15px;">Select Amount</div>
                    <div class="amount-options">
                        <div 
                            v-if="selectedProduct && selectedProduct.category === 'games'"
                            v-for="(amount, index) in gameAmounts[selectedProduct.name]" 
                            :key="index"
                            class="amount-option"
                            :class="{ selected: selectedAmount === amount }"
                            @click="selectAmount(amount)"
                        >
                            <span>{{ getOriginalAmountText(amount) }}</span>
                            <span class="original-price">{{ getPriceFromAmount(amount) }}</span>
                            <span class="discount-price" style="color: #2D7BD7; font-weight: bold;">GH‚Çµ{{ getDiscountedPrice(getPriceFromAmount(amount)) }}</span>
                        </div>
                        <div 
                            v-if="selectedProduct && selectedProduct.category === 'ecommerce'"
                            v-for="(amount, index) in ecommerceAmounts[selectedProduct.name]" 
                            :key="index"
                            class="amount-option"
                            :class="{ selected: selectedAmount === amount }"
                            @click="selectAmount(amount)"
                        >
                            <span>{{ getOriginalAmountText(amount) }}</span>
                            <span class="original-price">{{ getPriceFromAmount(amount) }}</span>
                            <span class="discount-price" style="color: #2D7BD7; font-weight: bold;">GH‚Çµ{{ getDiscountedPrice(getPriceFromAmount(amount)) }}</span>
                        </div>
                        <div 
                            v-if="selectedProduct && selectedProduct.category === 'amazon'"
                            v-for="(amount, index) in amazonAmounts[selectedProduct.name]" 
                            :key="index"
                            class="amount-option"
                            :class="{ selected: selectedAmount === amount }"
                            @click="selectAmount(amount)"
                        >
                            <span>{{ getOriginalAmountText(amount) }}</span>
                            <span class="original-price">{{ getPriceFromAmount(amount) }}</span>
                            <span class="discount-price" style="color: #2D7BD7; font-weight: bold;">GH‚Çµ{{ getDiscountedPrice(getPriceFromAmount(amount)) }}</span>
                        </div>
                        <div 
                            v-if="selectedProduct && selectedProduct.category === 'esim'"
                            v-for="(amount, index) in eSimAmounts[selectedProduct.name]" 
                            :key="index"
                            class="amount-option"
                            :class="{ selected: selectedAmount === amount }"
                            @click="selectAmount(amount)"
                        >
                            <span>{{ getOriginalAmountText(amount) }}</span>
                            <span class="original-price">{{ amount }}</span>
                            <span class="discount-price" style="color: #2D7BD7; font-weight: bold;">{{ getDiscountedEsimPrice(amount) }}</span>
                        </div>
                        <div v-if="selectedProduct && selectedProduct.category === 'ecommerce' && (selectedProduct.name === 'Binance Gift Card' || selectedProduct.name === 'PayPal Top-Up')" class="custom-amount-container">
                            <div class="custom-amount">
                                <label>{{ selectedProduct.name === 'Binance Gift Card' ? 'Enter amount ($5-$500)' : 'Enter amount ($10-$250)' }}</label>
                                <div class="custom-amount-input-container">
                                    <span>$</span>
                                    <input 
                                        type="number" 
                                        v-model="customAmount" 
                                        @input="updateCustomAmount($event, selectedProduct)"
                                        :min="selectedProduct.name === 'Binance Gift Card' ? 5 : 10"
                                        :max="selectedProduct.name === 'Binance Gift Card' ? 500 : 250"
                                        placeholder="0.00"
                                    >
                                </div>
                                <div v-if="customAmount" class="estimated-price">
                                    Estimated price: GH‚Çµ{{ (parseFloat(customAmount) * 15.8).toFixed(2) }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="product-description">
                <template v-if="selectedProduct && selectedProduct.category === 'games'">
                    Purchase {{ selectedProduct.name }} virtual currency quickly and securely. Simply select the amount you want, enter your Play ID, and complete your purchase to receive your code instantly.
                </template>
                <template v-if="selectedProduct && (selectedProduct.category === 'ecommerce' || selectedProduct.category === 'amazon')">
                    Purchase {{ selectedProduct.name }} quickly and securely. Simply select the amount you want, enter your email, and complete your purchase to receive your digital voucher instantly.
                </template>
                <template v-if="selectedProduct && selectedProduct.category === 'esim'">
                    {{ eSimDescriptions[selectedProduct.name] }}
                </template>
            </div>
            
            <button v-if="selectedProduct && selectedProduct.category === 'games'" @click="purchaseGameProduct" class="purchase-button">
                Confirm Purchase
            </button>
            
            <button v-if="selectedProduct && (selectedProduct.category === 'ecommerce' || selectedProduct.category === 'amazon')" @click="purchaseEcommerceProduct" class="purchase-button">
                Confirm Purchase
            </button>
            
            <button v-if="selectedProduct && selectedProduct.category === 'esim'" @click="purchaseEsimProduct" class="purchase-button">
                Confirm Purchase
            </button>
            
            <div v-if="selectedProduct && selectedProduct.name === 'Fortnite'" class="faq-section">
                <h3>Fortnite V-Bucks Card FAQ</h3>
                
                <div class="faq-item">
                    <div class="faq-question" @click="toggleFaq(10)">What Are Fortnite V-Bucks?</div>
                    <div class="faq-answer" :class="{ active: activeFaq === 10 }">
                        V-Bucks are the virtual currency used in Fortnite. Players can spend them on various in-game items, including skins, pickaxes, wraps, emotes, and Battle Passes.
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" @click="toggleFaq(11)">How to Redeem a Fortnite V-Bucks Card</div>
                    <div class="faq-answer" :class="{ active: activeFaq === 11 }">
                        <p><strong>To successfully redeem your V-Bucks card, follow these steps:</strong></p>
                        <p><strong>Log in to Your Epic Games Account</strong></p>
                        <ul style="margin-left: 20px; margin-bottom: 10px;">
                            <li>Visit the official Epic Games website and sign in.</li>
                            <li>If you're redeeming for a console, use your console login credentials.</li>
                        </ul>
                        
                        <p><strong>Access the Redemption Page</strong></p>
                        <ul style="margin-left: 20px; margin-bottom: 10px;">
                            <li>Click on your display name at the top right.</li>
                            <li>Select V-Bucks Card from the dropdown menu.</li>
                            <li>Alternatively, go directly to: Fortnite V-Bucks Card Redemption.</li>
                        </ul>
                        
                        <p><strong>Begin the Redemption Process</strong></p>
                        <ul style="margin-left: 20px; margin-bottom: 10px;">
                            <li>Click Get Started to proceed.</li>
                        </ul>
                        
                        <p><strong>Enter Your V-Bucks Card Code</strong></p>
                        <ul style="margin-left: 20px; margin-bottom: 10px;">
                            <li>Retrieve the PIN from your email or physical card.</li>
                            <li>Input the code exactly as shown (without dashes).</li>
                            <li>Click Next to continue.</li>
                        </ul>
                        
                        <p><strong>Choose Your Platform</strong></p>
                        <ul style="margin-left: 20px; margin-bottom: 10px;">
                            <li>Select the gaming platform where you want to redeem the V-Bucks.</li>
                            <li>Click Next to proceed.</li>
                        </ul>
                        
                        <p><strong>Review and Confirm</strong></p>
                        <ul style="margin-left: 20px; margin-bottom: 10px;">
                            <li>Ensure the Epic Games account, chosen platform, and updated balance are correct.</li>
                            <li>Click Confirm to finalize the redemption.</li>
                        </ul>
                        
                        <p><strong>Note:</strong> If the platform you want isn't listed, double-check that you are signed into the correct Epic Games account.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" @click="toggleFaq(12)">Redeeming on Xbox & PlayStation</div>
                    <div class="faq-answer" :class="{ active: activeFaq === 12 }">
                        <p>For Xbox and PlayStation users, an additional step is required:</p>
                        <ul style="margin-left: 20px; margin-bottom: 10px;">
                            <li>After confirming the redemption, a 12-character or 25-character code will be generated.</li>
                            <li>This code will also be sent to your registered email.</li>
                            <li>Follow the on-screen instructions to sign in to the appropriate platform (Sony or Microsoft).</li>
                            <li>Enter the generated code to complete the redemption process.</li>
                        </ul>
                        <p><strong>Important:</strong> Ensure you're logged into the correct PlayStation or Xbox account linked to your Epic Games profile before entering the code.</p>
                    </div>
                </div>
            </div>
            
            <div v-if="selectedProduct && selectedProduct.category === 'ecommerce'" class="faq-section">
                <div class="faq-item">
                    <div class="faq-question" @click="toggleFaqEcommerce('description')">Description</div>
                    <div class="faq-answer" :class="{ active: activeFaqEcommerce === 'description' }">
                        {{ ecommerceDescriptions[selectedProduct.name] }}
                    </div>
                </div>
                
                <div v-if="ecommerceRedemption[selectedProduct.name]" class="faq-item">
                    <div class="faq-question" @click="toggleFaqEcommerce('redemption')">How to Redeem</div>
                    <div class="faq-answer" :class="{ active: activeFaqEcommerce === 'redemption' }">
                        <p style="white-space: pre-line">{{ ecommerceRedemption[selectedProduct.name] }}</p>
                    </div>
                </div>
                
                <div v-if="ecommerceTerms[selectedProduct.name]" class="faq-item">
                    <div class="faq-question" @click="toggleFaqEcommerce('terms')">Terms & Conditions</div>
                    <div class="faq-answer" :class="{ active: activeFaqEcommerce === 'terms' }">
                        <p style="white-space: pre-line">{{ ecommerceTerms[selectedProduct.name] }}</p>
                    </div>
                </div>
            </div>
            
            <div v-if="selectedProduct && selectedProduct.category === 'esim'" class="esim-faq-section">
                <div class="esim-faq-item">
                    <div class="esim-faq-question" @click="toggleEsimFaq('description')">Description</div>
                    <div class="esim-faq-answer" :class="{ active: activeFaqEcommerce === 'description' }">
                        <p v-html="eSimDetailedInfo[selectedProduct.name].description.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href=\'$2\' target=\'_blank\'>$1</a>')"></p>
                    </div>
                </div>
                
                <div class="esim-faq-item">
                    <div class="esim-faq-question" @click="toggleEsimFaq('redemption')">How to Redeem</div>
                    <div class="esim-faq-answer" :class="{ active: activeFaqEcommerce === 'redemption' }">
                        <p v-html="eSimDetailedInfo[selectedProduct.name].redemption.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href=\'$2\' target=\'_blank\'>$1</a>')"></p>
                    </div>
                </div>
                
                <div class="esim-faq-item">
                    <div class="esim-faq-question" @click="toggleEsimFaq('terms')">Terms and Conditions</div>
                    <div class="esim-faq-answer" :class="{ active: activeFaqEcommerce === 'terms' }">
                        <p>{{ eSimDetailedInfo[selectedProduct.name].terms }}</p>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="showTermsView" class="terms-view">
            <div class="crypto-header">
                <button class="back-button" @click="closeTermsView">‚Üê</button>
                <div class="crypto-title">Terms & Policy</div>
                <div style="width: 24px;"></div>
            </div>
            
            <div class="terms-container">
                <section 
                    v-for="(section, index) in terms" 
                    :key="index" 
                    class="terms-section"
                    :class="{ active: activePolicySection === index }"
                    @click="togglePolicy(index)"
                >
                    <h2>{{ section.title }}</h2>
                    <div class="terms-content">
                        <template v-if="section.bullets">
                            <ul>
                                <li v-for="(bullet, bIndex) in section.bullets" :key="bIndex">{{ bullet }}</li>
                            </ul>
                        </template>
                        <template v-else>
                            <p>{{ section.content }}</p>
                        </template>
                    </div>
                </section>
            </div>
        </div>

        <div v-if="!showCryptoView && !showTradeView && !showDataView && !showProductDetailView && !showTermsView">
            <!-- Bill board-->
            <div class="billboard">
                <div class="billboard-slider">
                    <div v-for="(slide, index) in billboardSlides" :key="index" 
                         class="billboard-slide" :class="'slide-' + (index + 1)" style="background: linear-gradient(rgba(45, 123, 215, 0.8), rgba(45, 123, 215, 0.9));">
                        <img :src="slide.image" :alt="slide.title" class="billboard-bg" style="opacity: 0.7;">
                        <div class="billboard-content">
                            <h1>{{ slide.title }}</h1>
                            <p>{{ slide.description }}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="categories">
                <div class="category" v-for="(items, category) in products" :key="category" style="box-shadow: 0 2px 8px rgba(45, 123, 215, 0.1); border: 1px solid #e6f0ff;">
                    <h2>{{ category === 'esim' ? 'eSIM Products' : 
                           category === 'topup' ? 'Mobile Top-Up' :
                           category.charAt(0).toUpperCase() + category.slice(1) }}</h2>
                    <div class="products">
                        <div 
                            :class="['product-slider', `${category}-slider`]"
                            @touchstart="startTouchSlide(category, $event)"
                            @touchmove="moveTouchSlide(category, $event)"
                            @touchend="endTouchSlide(category)"
                        >
                            <a v-for="product in items" 
                               :key="product.name"
                               :href="product.link"
                               class="product"
                               @click.prevent="handleProductClick(Object.assign({category}, product))">
                                <div class="discount-badge" style="background: #2D7BD7;">-{{discounts[category]}}%</div>
                                <div class="product-icon">
                                    <img v-if="product.image" :src="product.image" :alt="product.name">
                                    <template v-else>
                                        <template v-if="category === 'esim'">üåç</template>
                                        <svg v-else viewBox="0 0 24 24" :class="product.name.toLowerCase().replace(' ', '-')">
                                            <path v-if="category === 'amazon'" fill="#FF9900" d="M15.93,17.09C15.75,17.25 15.5,17.26 15.3,17.15C14.41,16.41 14.25,16.07 13.76,15.36C12.29,16.86 11.25,17.31 9.34,17.31C7.09,17.31 5.33,15.92 5.33,13.14C5.33,10.96 6.5,9.5 8.19,8.76C9.65,8.12 11.68,8 13.23,7.83V7.5C13.23,6.84 13.28,6.09 12.9,5.54C12.58,5.05 11.95,4.84 11.4,4.84C10.38,4.84 9.47,5.37 9.25,6.45C9.2,6.69 9,6.93 8.78,6.94L6.18,6.66C5.96,6.61 5.72,6.43 5.78,6.11C6.38,2.95 9.23,2 11.78,2C13.08,2 14.78,2.35 15.81,3.23C17.11,4.3 17,5.8 17,7.5V12.18C17,13.35 17.38,13.9 18.02,14.72C18.19,14.94 18.21,15.21 18,15.43C17.34,16.04 16.7,16.66 16.04,17.26L15.93,17.09Z"/>
                                            <path v-else fill="#000" d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,1 5,21H19A2,2 0 0,1 21,19V5C21,3.89 20.1,3 19,3M12,7L7,12H10V16H14V12H17L12,7M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z"/>
                                        </svg>
                                    </template>
                                </div>
                                <span>{{ product.name }}</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Buttom nav -->
            <nav class="bottom-nav">
                <div class="nav-item" :class="{ active: activeTab === 'shop' }" @click="setActiveTab('shop')">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M12,3L2,12H5V20H19V12H22L12,3M12,8.75A2.25,2.25 0 0,1 14.25,11A2.25,2.25 0 0,1 12,13.25A2.25,2.25 0 0,1 9.75,11A2.25,2.25 0 0,1 12,8.75Z" />
                    </svg>
                    <span>Shop</span>
                </div>
                <div class="nav-item" :class="{ active: activeTab === 'data' }" @click="setActiveTab('data')">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z" />
                    </svg>
                    <span>Data</span>
                </div>
                <div class="nav-item" :class="{ active: activeTab === 'crypto' }" @click="setActiveTab('crypto')">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M17,16H15V8H17M13,16H11V8H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
                    </svg>
                    <span>Crypto</span>
                </div>
                <div class="nav-item" :class="{ active: activeTab === 'trade' }" @click="setActiveTab('trade')">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M21,9V11H18V9H21M16,9V11H13V9H16M12,9V11H9V9H12M8,9V11H5V9H8M22,5V7H2V5H22M13,14H11V17H8V19H11V22H13V19H16V17H13V14Z" />
                    </svg>
                    <span>Trade</span>
                </div>
                <div class="nav-item" :class="{ active: activeTab === 'terms' }" @click="setActiveTab('terms')">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M14,10H10V12H14V10M14,14H10V16H14V14M14,6H10V8H14V6M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2Z" />
                    </svg>
                    <span>Terms&P</span>
                </div>
            </nav>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
<!-- partial -->
  <script type="module" src="{% static 'trustbyte/js/shop-update_script.js' %}"></script>

  <script>
    // MTN Data Purchase JavaScript
    function initDataPurchase() {
        const dataButtons = document.querySelectorAll('.data-btn');
        const priceValue = document.querySelector('.price-value');
        const phoneInput = document.getElementById('phone-number');
        const buyButton = document.querySelector('.buy-button');
        
        let selectedSize = '1GB';
        let selectedPrice = '4.70';
        
        // Initialize with 1GB selected
        if (dataButtons.length > 0) {
            dataButtons[0].classList.add('selected');
        }
        
        // Add click event listeners to data buttons
        dataButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove selected class from all buttons
                dataButtons.forEach(btn => btn.classList.remove('selected'));
                
                // Add selected class to clicked button
                this.classList.add('selected');
                
                // Update selected data
                selectedSize = this.dataset.size;
                selectedPrice = this.dataset.price;
                
                // Update price display
                priceValue.textContent = `‚Çµ${selectedPrice}`;
                
                // Enable buy button if phone number is valid
                checkFormValidity();
            });
        });
        
        // Add input event listener to phone number
        phoneInput.addEventListener('input', function() {
            // Remove any non-digit characters
            this.value = this.value.replace(/\D/g, '');
            
            // Check form validity
            checkFormValidity();
        });
        
        // Function to check if form is valid
        function checkFormValidity() {
            const phoneNumber = phoneInput.value.trim();
            
            // Enable buy button only if phone number is 10 digits
            if (phoneNumber.length === 10) {
                buyButton.disabled = false;
            } else {
                buyButton.disabled = true;
            }
        }
        
        // Add click event listener to buy button
        buyButton.addEventListener('click', function() {
            const phoneNumber = phoneInput.value.trim();
            
            if (phoneNumber.length === 10) {
                // Show confirmation modal instead of alert
                showConfirmationModal();
            }
        });
        
        // Function to show confirmation modal
        function showConfirmationModal() {
            const modal = document.getElementById('confirmationModal');
            modal.classList.add('active');
        }
        
        // Function to hide confirmation modal
        function hideConfirmationModal() {
            const modal = document.getElementById('confirmationModal');
            modal.classList.remove('active');
        }
        
        // Add event listeners to modal buttons
        const cancelButton = document.getElementById('cancelButton');
        const confirmButton = document.getElementById('confirmButton');
        
        cancelButton.addEventListener('click', function() {
            hideConfirmationModal();
        });
        
        confirmButton.addEventListener('click', function() {
            const phoneNumber = phoneInput.value.trim();
            hideConfirmationModal();
            
            // Here you would typically send the data to your backend
            alert(`Purchasing ${selectedSize} data bundle for ${phoneNumber} at ‚Çµ${selectedPrice}`);
            
            // You can replace the alert with actual API call:
            // fetch('/api/purchase-data/', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json',
            //         'X-CSRFToken': getCookie('csrftoken')
            //     },
            //     body: JSON.stringify({
            //         size: selectedSize,
            //         price: selectedPrice,
            //         phone_number: phoneNumber
            //     })
            // })
            // .then(response => response.json())
            // .then(data => {
            //     if (data.success) {
            //         alert('Data purchase successful!');
            //     } else {
            //         alert('Purchase failed: ' + data.message);
            //     }
            // });
        });
        
        // Close modal when clicking outside
        const modalOverlay = document.getElementById('confirmationModal');
        modalOverlay.addEventListener('click', function(e) {
            if (e.target === modalOverlay) {
                hideConfirmationModal();
            }
        });
    }

    // Initialize data purchase when page loads
    document.addEventListener('DOMContentLoaded', function() {
        // This will be called when the Data view is shown via Vue
    });

    // Helper function to get CSRF token
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
  </script>

</body>
</html>